<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://earth.google.com/kml/2.1">
<Document>  
  <Style id="documentStyle">
    <IconStyle>
      <Icon>
        <href>http://www.iconspedia.com/uploads/1912642692.png</href>
      </Icon>
    </IconStyle>
  </Style>
  
  <Style id="overlayStyle"> <!-- style for ScreenOverlay -->
    <BalloonStyle>
      <displayMode>undecorated</displayMode>
    </BalloonStyle>
  </Style>
  
  <Style id="flickrStyle"> <!-- style for placemarkers -->
    <IconStyle>
      <scale>1.0</scale>
      <Icon>
        <href>http://www.iconspedia.com/uploads/1912642692.png</href> <!-- url to twitter logo -->
      </Icon>
      <hotSpot x="0.5" y="0" xunits="fraction" yunits="fraction" />
    </IconStyle>
  </Style>
  <ScreenOverlay>
    <name>myOverlay</name>
      <description><![CDATA[
     
      <style type="text/css">
      ul { st
      
      </style>
      
      <ul id="product-list">
        <li>test</li>
        <li>item</li>
      </ul>
      
      <script type="text/javascript">
        var productList = document.getElementById('product-list');
        var rootUrl  = "http://www.fabienrenaud.com/zap/argon/www";
        var shops    = {};
        
        var fetchProducts = function() {          
          $(productList).empty();
          
          var myLoc = KHARMA.getLocation();
          var lat = 49.116846;
          var lng = 6.178501;
          $.getJSON(rootUrl + "/getShops.php", { lat:lat, lng:lng }, function(data) {
            $.each(data, function(i, item) {
              var url = item.webServiceUrl;
              var uid = item.publicUid;
              var currency = item.currency;
              $.getJSON(url, {publicUid:uid}, function(data) {
                $.each(data, function(i, item) {
                  var li = document.createElement("li");
                      li.appendChild(document.createTextNode(item.name));
                  productList.appendChild(li);
                });
              });
            });
          });
        };
        
        $(document).ready(function() {
          fetchProducts();
        });
      </script>
    ]]></description>
      
    <overlayXY x="0.5" y="0.5" xunits="fraction" yunits="fraction"/> 
    <screenXY x="0.01" y="1.0" xunits="fraction" yunits="fraction"/>
    <size x="0" y="0" xunits="pixels" yunits="pixels"/>
    
    <styleUrl>#overlayStyle</styleUrl>  
  
  </ScreenOverlay>
  
  <styleUrl>#documentStyle</styleUrl> 
  
  <!-- KML document description -->
  <name>Zap</name>
  <Snippet>Zap for Argon</Snippet>
  <description><![CDATA[
    <div><p><b>Zap for Argon</b></p>
    <p>
    <b>notes:</b>
    <ul>
    <li>Searches for geo-tagged Flickr photos within 5km of user's current location
    <li>Displays photos as icons within the AR browser's viewing space
    <li>Click on icons to view larger photo<br>
    <li>The javascript functions use JQuery to retrieve JSON data from a Flickr search built within the Yahoo Pipes framework
    <li>The pipes JSON data is then used to create new JSON placemark objects that are then turned into new KML placemarks
    <li>Once the kml placemarks have been rendered in the display, the user may begin interacting with them
    </ul>
  ]]></description>   
  
</Document>
</kml>